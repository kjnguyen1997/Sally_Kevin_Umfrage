<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nachhaltigkeitsumfrage</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: rgb(34, 139, 34);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: rgb(235, 245, 235);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
            border: 3px solid rgb(28, 100, 28);
        }

        h2 {
            text-align: center;
            color: rgb(28, 100, 28);
        }

        p, label {
            font-weight: bold;
            color: rgb(20, 80, 20);
            display: block;
            margin-bottom: 8px;
        }

        input[type="text"],
        input[type="email"],
        textarea {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid rgb(28, 100, 28);
            margin-bottom: 12px;
            font-size: 14px;
            box-sizing: border-box; /* Stellt sicher, dass die Breite korrekt berechnet wird */
        }

        .image-container {
            display: flex;
            justify-content: space-between;
        }

        .image-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            margin: 10px;
            position: relative;
        }

        .image-label img {
            width: 120px;
            height: auto;
            border-radius: 8px;
            box-shadow: 2px 4px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .image-label:hover img {
            transform: scale(1.1);
            box-shadow: 4px 6px 12px rgba(0, 0, 0, 0.3);
        }

        .image-label input[type="radio"] {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .image-label input[type="radio"]:checked + img {
            border: 4px solid green;
        }

        button.submit {
            display: block;
            width: 100%;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            background: rgb(255, 215, 0);
            color: black;
            border: none;
            box-shadow: 2px 4px 10px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease-in-out;
        }

        button.submit:hover {
            background: rgb(34, 139, 34);
            box-shadow: 4px 6px 12px rgba(0, 0, 0, 0.3);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Nachhaltigkeitsumfrage</h2>
        <form id="umfrageForm">
            <label for="name">1. Ihr Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="email">2. Ihre E-Mail:</label>
            <input type="email" id="email" name="email" required>

            <p>3. Welche nachhaltigen Maßnahmen setzen Sie um? (Mehrfachauswahl möglich)</p>
            <label><input type="checkbox" name="massnahmen" value="Muelltrennung"> Mülltrennung</label>
            <label><input type="checkbox" name="massnahmen" value="Fahrrad Statt Auto"> Fahrrad oder öffentliche Verkehrsmittel statt Auto</label>
            <label><input type="checkbox" name="massnahmen" value="Energiesparen"> Energiesparen</label>
            <label><input type="checkbox" name="massnahmen" value="Plastikvermeidung"> Plastikvermeidung</label>

            <p>4. Wie oft kaufen Sie regionale oder biologische Lebensmittel?</p>
            <label><input type="radio" name="biolebensmittel" value="Immer"> Immer</label>
            <label><input type="radio" name="biolebensmittel" value="Oft"> Oft</label>
            <label><input type="radio" name="biolebensmittel" value="Manchmal"> Manchmal</label>
            <label><input type="radio" name="biolebensmittel" value="Selten"> Selten</label>
            <label><input type="radio" name="biolebensmittel" value="Nie"> Nie</label>

            <label for="energie">Welche Maßnahmen treffen Sie, um Energie zu sparen?</label>
            <textarea id="energie" name="energie" rows="4"></textarea>

            <p>Welches der Bilder zeigt nachhaltiges Verhalten?</p>
            <div class="image-container">
                <label class="image-label">
                    <input type="radio" name="nachhaltigkeit" value="Plastikmüll">
                    <img src="https://www.wochenspiegellive.de/fileadmin/user_upload/import/artikel/52/7452/plastic-waste-3962409_1920.jpg" alt="Plastikmüll">
                    <span>Plastikmüll</span>
                </label>
            
                <label class="image-label">
                    <input type="radio" name="nachhaltigkeit" value="Öffentlicher Nahverkehr">
                    <img src="https://www.deutschland-mobil-2030.de/img/Blog/News/0822/Menschen-wollen-oeffentlichen-Nahverkehr/menschen-wollen-oeffentlichen-nahverkehr-og-tags.jpg" alt="ÖPNV">
                    <span>Öff. Verkehr</span>
                </label>
            
                <label class="image-label">
                    <input type="radio" name="nachhaltigkeit" value="Flugzeug">
                    <img src="https://www.reise-liebe.com/wp-content/uploads/2023/07/jeshoots-com-mSESwdMZr-A-unsplash-1200x800.jpg" alt="Flugzeug">
                    <span>Flugzeug</span>
                </label>
            </div>

            <p>6. Wie oft nutzen Sie öffentliche Verkehrsmittel anstelle des Autos?</p>
            <label><input type="radio" name="oeffiverkehr" value="Täglich"> Täglich</label>
            <label><input type="radio" name="oeffiverkehr" value="Mehrmals pro Woche"> Mehrmals pro Woche</label>
            <label><input type="radio" name="oeffiverkehr" value="Selten"> Selten</label>
            <label><input type="radio" name="oeffiverkehr" value="Nie"> Nie</label>

            <label for="vorschlaege">7. Haben Sie weitere Ideen für ein nachhaltiges Leben?</label>
            <textarea id="vorschlaege" name="vorschlaege" rows="4"></textarea>

            <button type="submit" class="submit">Umfrage absenden</button>
        </form>
        <p id="responseMessage"></p>
    </div>

    <script>
        document.getElementById("umfrageForm").addEventListener("submit", function(event) {
            event.preventDefault();
            let submitButton = document.querySelector('button');
            let responseMessage = document.getElementById("responseMessage");
            submitButton.disabled = true;
            submitButton.textContent = "Senden...";
    
            var formData = new FormData(this);
            var url = "https://script.google.com/macros/s/AKfycbxuVF6JOke6iQZLOwN7WsCAegMndLKVz8SBiuXIbiYFwFRJi0K2fg6o75O4ggeem_kj/exec";
            
            // ✅ Extrahiere alle Checkbox-Werte und verbinde sie zu einem String
            var massnahmenArray = [];
            document.querySelectorAll('input[name="massnahmen"]:checked').forEach(checkbox => {
                massnahmenArray.push(checkbox.value);
            });
            
            // ✅ Statt JSON.stringify() wird .join(", ") verwendet
            var massnahmenString = massnahmenArray.join(", ");
            
            // ✅ String in FormData einfügen
            formData.set("massnahmen", massnahmenString);
            
            fetch(url, {
                method: "POST",
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                responseMessage.innerHTML = `<span style="color: rgb(28, 100, 28);">Danke für Ihre Teilnahme!</span>`;
                submitButton.replaceWith(responseMessage);
            })
            .catch(error => {
                console.error("Fehler:", error);
                submitButton.disabled = false;
                submitButton.textContent = "Umfrage absenden";
            });
        });
    </script>
    
    

</body>
</html>
